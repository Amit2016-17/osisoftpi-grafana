{"version":3,"sources":["../src/annotation_ctrl.js"],"names":["_","PiWebApiAnnotationsQueryCtrl","$scope","annotation","query","databases","templates","getDatabases","$event","getEventFrames","ctrl","datasource","afserver","webid","then","dbs","getEventFrameTemplates","database","WebId","templateUrl"],"mappings":";;;;;;;;;;;;;;;AAAOA,O;;;;;;;;;;;;;;;;;;;;;8CAEMC,4B;AACX,8CAAaC,MAAb,EAAqB;AAAA;;AACnB,eAAKA,MAAL,GAAcA,MAAd;AACA,eAAKC,UAAL,CAAgBC,KAAhB,GAAyB,KAAKD,UAAL,CAAgBC,KAAhB,IAAyB,EAAlD;AACA,eAAKC,SAAL,GAAiB,EAAjB;AACA,eAAKC,SAAL,GAAiB,EAAjB;AACA,eAAKC,YAAL;AACD;;;;4CACkB,CAElB;;;0CACgBC,M,EAAQ;AACvB,iBAAKC,cAAL;AACD;;;yCACe;AACd,gBAAIC,OAAO,IAAX;AACAA,iBAAKC,UAAL,CAAgBJ,YAAhB,CAA6B,KAAKI,UAAL,CAAgBC,QAAhB,CAAyBC,KAAtD,EAA6DC,IAA7D,CAAkE,eAAO;AACvEJ,mBAAKL,SAAL,GAAiBU,GAAjB;AACD,aAFD;AAGD;;;2CACiB;AAChB,gBAAIL,OAAO,IAAX;AACAA,iBAAKC,UAAL,CAAgBK,sBAAhB,CAAuCN,KAAKP,UAAL,CAAgBc,QAAhB,CAAyBC,KAAhE,EAAuEJ,IAAvE,CAA4E,qBAAa;AACvFJ,mBAAKJ,SAAL,GAAiBA,SAAjB;AACD,aAFD;AAGD;;;;;;;;AAGHL,mCAA6BkB,WAA7B,GAA2C,kCAA3C","file":"annotation_ctrl.js","sourceRoot":"gridprotectionalliance-osisoftpi-datasource","sourcesContent":["import _ from 'lodash'\r\n\r\nexport class PiWebApiAnnotationsQueryCtrl {\r\n  constructor ($scope) {\r\n    this.$scope = $scope\r\n    this.annotation.query = (this.annotation.query || {})\r\n    this.databases = []\r\n    this.templates = []\r\n    this.getDatabases()\r\n  }\r\n  templateChanged () {\r\n\r\n  }\r\n  databaseChanged ($event) {\r\n    this.getEventFrames()\r\n  }\r\n  getDatabases () {\r\n    var ctrl = this\r\n    ctrl.datasource.getDatabases(this.datasource.afserver.webid).then(dbs => {\r\n      ctrl.databases = dbs\r\n    })\r\n  }\r\n  getEventFrames () {\r\n    var ctrl = this\r\n    ctrl.datasource.getEventFrameTemplates(ctrl.annotation.database.WebId).then(templates => {\r\n      ctrl.templates = templates\r\n    })\r\n  }\r\n}\r\n\r\nPiWebApiAnnotationsQueryCtrl.templateUrl = 'partials/annotations.editor.html'\r\n"]}