{"version":3,"sources":["../src/annotation_ctrl.js"],"names":["_","PiWebApiAnnotationsQueryCtrl","$scope","annotation","query","databases","templates","getDatabases","then","getEventFrames","$event","ctrl","datasource","afserver","webid","dbs","getEventFrameTemplates","database","WebId","templateUrl"],"mappings":";;;;;;;;;;;;;;;AAAOA,O;;;;;;;;;;;;;;;;;;;;;8CAEMC,4B;AACX,8CAAaC,MAAb,EAAqB;AAAA;;AAAA;;AACnB,eAAKA,MAAL,GAAcA,MAAd;AACA,eAAKC,UAAL,CAAgBC,KAAhB,GAAyB,KAAKD,UAAL,CAAgBC,KAAhB,IAAyB,EAAlD;AACA,eAAKD,UAAL,CAAgBE,SAAhB,GAA6B,KAAKF,UAAL,CAAgBE,SAAhB,IAA6B,EAA1D;AACA,eAAKF,UAAL,CAAgBG,SAAhB,GAA6B,KAAKH,UAAL,CAAgBG,SAAhB,IAA6B,EAA1D;AACA,eAAKC,YAAL,GAAoBC,IAApB,CAAyB,YAAM;AAC7B,mBAAO,MAAKC,cAAL,EAAP;AACD,WAFD;AAGD;;;;0CACgBC,M,EAAQ,CAExB;;;0CACgBA,M,EAAQ;AACvB,iBAAKD,cAAL;AACD;;;yCACe;AACd,gBAAIE,OAAO,IAAX;AACA,mBAAOA,KAAKC,UAAL,CAAgBL,YAAhB,CAA6B,KAAKK,UAAL,CAAgBC,QAAhB,CAAyBC,KAAtD,EAA6DN,IAA7D,CAAkE,eAAO;AAC9EG,mBAAKR,UAAL,CAAgBE,SAAhB,GAA4BU,GAA5B;AACD,aAFM,CAAP;AAGD;;;2CACiB;AAChB,gBAAIJ,OAAO,IAAX;AACA,mBAAOA,KAAKC,UAAL,CAAgBI,sBAAhB,CAAuCL,KAAKR,UAAL,CAAgBc,QAAhB,CAAyBC,KAAhE,EAAuEV,IAAvE,CAA4E,qBAAa;AAC9FG,mBAAKR,UAAL,CAAgBG,SAAhB,GAA4BA,SAA5B;AACD,aAFM,CAAP;AAGD;;;;;;;;AAGHL,mCAA6BkB,WAA7B,GAA2C,kCAA3C","file":"annotation_ctrl.js","sourceRoot":"gridprotectionalliance-osisoftpi-datasource","sourcesContent":["import _ from 'lodash'\r\n\r\nexport class PiWebApiAnnotationsQueryCtrl {\r\n  constructor ($scope) {\r\n    this.$scope = $scope\r\n    this.annotation.query = (this.annotation.query || {})\r\n    this.annotation.databases = (this.annotation.databases || [])\r\n    this.annotation.templates = (this.annotation.templates || [])\r\n    this.getDatabases().then(() => {\r\n      return this.getEventFrames()\r\n    })\r\n  }\r\n  templateChanged ($event) {\r\n\r\n  }\r\n  databaseChanged ($event) {\r\n    this.getEventFrames()\r\n  }\r\n  getDatabases () {\r\n    var ctrl = this\r\n    return ctrl.datasource.getDatabases(this.datasource.afserver.webid).then(dbs => {\r\n      ctrl.annotation.databases = dbs\r\n    })\r\n  }\r\n  getEventFrames () {\r\n    var ctrl = this\r\n    return ctrl.datasource.getEventFrameTemplates(ctrl.annotation.database.WebId).then(templates => {\r\n      ctrl.annotation.templates = templates\r\n    })\r\n  }\r\n}\r\n\r\nPiWebApiAnnotationsQueryCtrl.templateUrl = 'partials/annotations.editor.html'\r\n"]}